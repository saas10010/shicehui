# 师策汇 产品需求文档（PRD）

项目信息

- 项目名称：师策汇
- 产品形态：PC Web（教师端）+ 微信小程序（教师端/家长学生端）
- 技术约束：`uniapp + nextjs + fastapi`
- 计划周期：2 个月
- 需求来源：`docs/teacher_requirements_analysis.md`、`师策汇_产品差异化分析报告.md`

## 1. Goals and Background Context

### 1.1 Goals

- 将“作业批改”升级为“批改即建档”：批改结果自动归档到学生学情档案，可长期追踪。
- 在教师低操作成本前提下完成高频闭环：连拍采集 → 自动归档 → 批改确认 → 统计看板。
- 将学情数据转化为可交付成果：一键生成可打印的练习册/复习册，并在小程序端触达家长/学生。
- 构建可持续的题目结构化能力：错题记录具备题目、解析、知识点标签，为推题/组卷/统计提供可信基础。

### 1.2 Background Context

教师在日常教学中面临两个核心矛盾：一是批改工作量大且碎片化，二是批改数据难以沉淀为可复用的“学情资产”。单纯的拍照批改工具只能解决“当下对错”，无法支撑“长期追踪、个性化分层、期末复习资料”这些真实的教学目标。

本项目以“学生学情档案”为核心对象，采用“二维码身份归档”降低老师操作负担，把批改数据自动写入档案，再基于结构化错题与知识点标签，生成个性化推题与可打印交付物（练习册/复习册），形成教师端持续使用与家长端付费转化的闭环。

### 1.3 Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-16 | v1.0 | 基于差异化分析报告生成首版 PRD | Codex |

## 2. 范围说明（两个月交付边界）

### 2.1 本期范围（必须交付）

- 教师端：班级/学生建档、二维码生成与下载、连拍采集、自动归档、批改确认、错题结构化沉淀、基础统计看板。
- 家长/学生端：作业结果查看、错题回看、领取并完成巩固练习（基础版）。
- 交付物：全班共性易错题单 PDF、学生个人练习册/复习册 PDF（模板化版式）。

### 2.2 本期不做（明确排除）

- 校级/教研协作（题单共编、审核发布、权限体系扩展）。
- 完整“知识图谱”与复杂自适应路径（本期仅要求知识点标签可用、可统计）。
- 线下打印机/打印店深度集成（本期以 PDF 交付闭环为主）。
- 学校教务/课表/成绩等综合教务系统能力。

## 3. 用户与典型场景

### 3.1 角色（Personas）

- 教师：高频使用者，关注“快、准、少操作”，需要班级与个体两套视角快速切换。
- 学生：在小程序端完成巩固练习与错题回看。
- 家长：查看学情报告、接收复习资料、推动学生完成练习。

### 3.2 典型使用场景（Use Cases）

- UC1：教师导入班级名单并生成二维码贴纸，发放给学生粘贴作业本。
- UC2：教师连拍全班作业，系统自动识别学生并归档，老师只处理少量异常。
- UC3：教师确认批改结果并生成“全班共性易错题单”，用于课堂讲评或布置统一巩固。
- UC4：系统为每个学生生成个人练习册/复习册 PDF，家长端收到并下载/打印。

## 4. Requirements

### 4.1 Functional

- FR1: 支持教师创建班级并导入学生名单（姓名、学号/编号），生成学生档案。
- FR2: 为每个学生生成唯一二维码，并支持下载打印版（A4 排版）与单个二维码图片。
- FR3: 微信小程序提供“连拍模式”，支持离线暂存、批量上传、上传进度与失败重试。
- FR4: 系统在上传后自动识别二维码并将作业图片归档到对应学生与对应作业批次。
- FR5: 支持对“未识别/识别冲突”的作业进行批量归属修正（按学生/按批次）。
- FR6: 支持 OCR 识别题目内容并产出“批改初稿”（题目、答案区域、对错/得分）。
- FR7: 教师可在批改确认页对识别结果进行快速纠错（改对错、改分数、补充评语/订正点）。
- FR8: 系统将错题以结构化记录保存：题目图/文本、学生、时间、作业批次、知识点标签、解析链接（如有）。
- FR9: 教师端提供班级看板：按题目与知识点统计错误率排行，支持按时间范围筛选。
- FR10: 教师端提供学生档案页：时间轴、错题列表、按知识点聚合的薄弱点概览。
- FR11: 支持生成“全班共性易错题单”PDF（按错误率排序，附解析/讲评区）。
- FR12: 支持生成“学生个人练习册/复习册”PDF（按时间范围与知识点去重聚合，含订正区）。
- FR13: 支持为错题推荐同考点巩固题（基于题库检索的相似题），并生成练习任务下发到学生端。
- FR14: 学生端支持领取练习任务、完成作答并提交，系统记录完成状态与正确率。
- FR15: 家长端支持查看作业结果通知、下载练习册/复习册 PDF、查看错题与解析。

### 4.2 Non Functional

- NFR1: 连拍体验不阻塞拍摄：在网络不稳定时可持续拍摄并离线暂存，恢复网络后自动续传。
- NFR2: 处理时延目标：单张作业在“上传完成后”5 分钟内给出可查看的批改初稿（95 分位）。
- NFR3: 自动归档准确率目标：二维码可见且无遮挡的情况下，归档正确率达到 99%（以抽检统计）。
- NFR4: 可用性：核心批改链路（连拍、上传、查看批改结果）月可用性不低于 99.5%。
- NFR5: 数据安全：学生个人信息、作业图片、学情数据按最小权限访问；关键数据传输与存储加密；提供操作审计日志。
- NFR6: 合规与隐私：提供清晰的隐私政策与数据使用告知；支持教师/家长发起数据删除申请（按班级/按学生）。
- NFR7: 可扩展性：题库检索、OCR、PDF 生成采用可横向扩展的后台任务模型，支持按班级/学校增长扩容。
- NFR8: 兼容性：PC Web 兼容主流浏览器的近两年版本；小程序兼容微信客户端近两年版本。

## 5. User Interface Design Goals

### 5.1 Overall UX Vision

教师端的核心体验是“少点一下都是效率”：以连拍为中心的高频流程必须顺滑，系统默认自动完成归档与识别，教师只处理异常与确认。家长/学生端以“清晰、可信、可执行”为主：看得懂哪里错、为什么错、下一步做什么练习。

### 5.2 Key Interaction Paradigms

- 小程序教师端：连拍模式（连续拍摄 + 自动队列上传 + 结果异步回流）。
- Web 教师端：班级看板与学生档案两种视角一键切换；批改确认以“批量操作 + 快捷纠错”为主。
- 家长/学生端：通知卡片 → 结果详情 → 练习任务（领取/作答/提交）闭环。

### 5.3 Core Screens and Views

- 登录/账号绑定页
- 班级列表页
- 班级详情（学生列表、二维码下载）
- 连拍采集页（小程序）
- 上传队列/处理状态页（小程序）
- 作业批次详情页（按学生/按异常筛选）
- 批改确认页（纠错与评语）
- 班级数据看板（题目/知识点排行与趋势）
- 学生档案页（时间轴、错题、薄弱点）
- PDF 生成与下载页（题单/练习册/复习册）
- 家长/学生通知列表与结果详情页
- 练习任务页（领取、作答、提交、结果）

### 5.4 Accessibility: Custom Requirements

- 关键操作区域（批改确认、下载资料）具备明确文字标签与足够对比度。
- Web 端核心流程支持键盘操作到达主要控件；图片内容提供必要的文本说明入口（用于辅助理解与审阅）。

### 5.5 Branding

- 风格定位：克制、可靠、偏工具型；信息密度高但层级清晰。
- 视觉原则：把“异常/待处理/已完成”状态用统一色彩与标签体系呈现，避免教师误判。

### 5.6 Target Device and Platforms: Cross-Platform

- PC Web（教师端）：响应式优先，适配常见办公分辨率。
- 微信小程序：教师端（采集/查看）、家长学生端（查看/练习）。

## 6. Technical Assumptions

- 前端：
  - 微信小程序与多端复用采用 `uniapp`（重点保障相机/相册、离线暂存、上传队列体验）。
  - 教师 PC Web 采用 `nextjs`，承载看板、档案、批改确认与资料管理。
- 后端：`fastapi` 提供统一 API（账号、班级、作业、错题、题单、练习任务、PDF 生成）。
- 存储：作业图片与 PDF 使用对象存储；结构化数据使用关系型数据库；检索与标签使用专用检索组件（用于题目匹配/相似题检索）。
- 任务体系：OCR、题目匹配、PDF 生成、统计聚合均通过后台任务队列异步处理，并可追踪状态。
- 识别能力：二维码识别必须本地可用并具备高稳定性；OCR 与题目匹配能力由后端统一封装成内部服务接口，便于替换实现。
- 题库与标签：本期要求至少覆盖目标学科/年级的核心题型与知识点标签，并支持“按相似度检索同考点题”。

## 7. 约束与依赖

- 周期约束：2 个月内完成“教师端高频闭环 + PDF 交付闭环 + 学生端基础练习闭环”。
- 运营依赖：需要至少 1 个试点班级用于二维码贴纸流程验证与体验调优。
- 内容依赖：题库与解析的可用性直接影响推题与复习册质量，需在项目早期完成最小可用覆盖。

## 8. Success Metrics（验收指标）

- 教师效率：
  - 单次作业批改的人均耗时下降（对比试点前流程）。
  - 单次批改的额外操作数（除拍摄外）可量化并持续下降。
  - 自动归档成功率、异常占比、纠错耗时（平均/95 分位）。
- 学生学习：
  - 练习任务领取率、完成率、再练率。
  - 错题的二次订正率（本期可先统计“打开/查看/提交”行为）。
- 家长转化：
  - 报告打开率、PDF 下载/打印率。
  - 资料类付费转化率与复购率（若本期包含付费能力，则纳入；否则作为下一期指标）。

## 9. 风险与缓解策略

- 风险 R1：二维码贴纸无法长期使用（丢失、遮挡、学生不配合）。
  - 缓解：提供补打入口与低成本补领流程；支持“缺码批量补归属”；设计拍摄取景框提示引导把码纳入画面。
- 风险 R2：OCR/题目匹配误差导致教师不信任。
  - 缓解：批改确认页以“快速纠错”为核心；所有自动结论可回溯与可修正；先保证“归档正确”，再逐步提高识别精度。
- 风险 R3：题库标签覆盖不足导致推题/统计不可用。
  - 缓解：一期聚焦目标学科/年级/题型；以“可统计的知识点集合”作为上线门槛；对无法匹配的题目进入“待标注池”。
- 风险 R4：处理时延过高影响连拍节奏与使用意愿。
  - 缓解：全链路异步与队列可视化；优先产出“可查看的初稿”，深度处理延后；按班级分流与容量预估扩容。
- 风险 R5：学生数据与作业图片涉及敏感信息。
  - 缓解：最小权限与审计；明确数据留存周期；提供删除能力与试点学校/家长告知流程。

## 10. Epics Overview

- Epic 1：基础设施与班级建档（账号、班级/学生、二维码）
- Epic 2：连拍采集与批改闭环（归档、异常处理、批改确认、错题沉淀、看板）
- Epic 3：资料交付与巩固练习闭环（PDF、推题、学生练习、家长触达）

## 11. Epic 1 基础设施与班级建档

目标：在最短时间内让教师能够完成“建班-导入学生-生成二维码-发放贴纸”的闭环，为后续批改与归档奠定数据基础，并保证账号与权限可控。

### Story 1.1 账号体系与基础可用页面

As a 教师,  
I want 能登录并进入班级列表,  
so that 我可以开始使用系统管理我的班级。

Acceptance Criteria

1: 支持教师账号登录（至少支持手机号验证码或微信绑定中的一种），登录后进入班级列表页。  
2: 未登录访问受限页面会被引导到登录页。  
3: 后端提供健康检查接口并可在部署环境验证通过。  

### Story 1.2 班级创建与学生名单导入

As a 教师,  
I want 创建班级并导入学生名单,  
so that 系统能为每个学生建立学情档案。

Acceptance Criteria

1: 支持创建班级（名称、年级/学科可选字段）。  
2: 支持按模板导入学生名单（至少包含姓名与编号），导入后生成学生列表。  
3: 导入结果包含成功/失败条目与失败原因提示。  

### Story 1.3 学生档案基础信息页

As a 教师,  
I want 查看学生档案的基础信息,  
so that 我能确认归档对象正确无误。

Acceptance Criteria

1: 学生档案页展示姓名、编号、所属班级、二维码状态。  
2: 学生列表支持按姓名/编号搜索。  

### Story 1.4 二维码生成与下载打印

As a 教师,  
I want 为学生生成并下载二维码贴纸,  
so that 我能发放给学生并用于作业自动归档。

Acceptance Criteria

1: 每个学生拥有唯一二维码，二维码与学生档案绑定且不可重复。  
2: 支持下载 A4 打印版（多枚二维码排版）与单个二维码图片。  
3: 二维码包含足够信息用于后续归档（最少包含学生唯一标识与校验信息）。  

## 12. Epic 2 连拍采集与批改闭环

目标：跑通教师高频链路：连拍采集 → 自动归档 → 批改确认 → 结构化错题沉淀 → 班级/学生两套视角查看，确保异常可控与纠错成本低。

### Story 2.1 小程序连拍与上传队列

As a 教师,  
I want 在小程序中连续拍摄并批量上传作业,  
so that 我能在短时间内完成全班作业采集。

Acceptance Criteria

1: 连拍模式支持连续拍摄多张图片并形成待上传队列。  
2: 支持离线暂存，网络恢复后可继续上传，不丢失队列。  
3: 上传队列展示每张图片的状态（待上传/上传中/成功/失败），失败可重试。  

### Story 2.2 自动识别二维码并归档到学生

As a 教师,  
I want 系统自动识别二维码并把作业归档到学生名下,  
so that 我不需要手动选择学生。

Acceptance Criteria

1: 上传成功后，系统对图片进行二维码识别并生成归档结果（学生、批次、时间）。  
2: 未识别到二维码的图片被标记为“待处理异常”，不进入错误学生名下。  
3: 归档结果在作业批次详情中可按“学生/异常”筛选查看。  

### Story 2.3 异常批量处理与归属修正

As a 教师,  
I want 批量处理未识别或识别冲突的作业,  
so that 我能快速修正归档并继续批改。

Acceptance Criteria

1: 支持将异常图片批量指定到某个学生，或拆分到多个学生。  
2: 支持撤销/更改归属，并保留操作记录。  
3: 支持按作业批次筛选与处理异常图片，并可对同一批次执行批量归属修正。  
4: 修正后图片进入对应学生的作业批次列表。  

### Story 2.4 批改初稿与教师确认

As a 教师,  
I want 查看系统生成的批改初稿并进行确认纠错,  
so that 批改结果可信且可用于统计与推题。

Acceptance Criteria

1: 每张作业图片生成可查看的批改初稿，至少包含题目（题干/题号若可识别）、答案区域（若可识别）以及对错/得分等基础结果。  
2: 教师可快速纠错：改对错/改分数/补充评语；保存后形成最终批改记录。  
3: 批改记录与学生、作业批次、时间建立关联，可追溯。  

### Story 2.5 错题结构化沉淀与学生档案展示

As a 教师,  
I want 系统把错题按结构化方式沉淀到学生档案,  
so that 我能长期追踪与复习组卷。

Acceptance Criteria

1: 错题记录包含：学生、时间、作业批次、题目图/文本、批改结论、知识点标签字段（允许为空但可后续补齐）、解析链接（如有）。  
2: 学生档案页展示错题时间轴与错题列表，支持按时间筛选。  
3: 学生档案页提供按知识点聚合的薄弱点概览（至少支持按错误数量排序）。  

### Story 2.6 班级数据看板（基础版）

As a 教师,  
I want 查看班级层面的高错题与薄弱知识点,  
so that 我能快速决定讲评与统一巩固内容。

Acceptance Criteria

1: 班级看板支持按时间范围统计：题目错误率排行、知识点错误率排行。  
2: 点击题目/知识点可下钻到相关错题与涉及学生列表。  

## 13. Epic 3 资料交付与巩固练习闭环

目标：把学情数据转化为可交付的资料与可执行的练习任务：教师一键生成 PDF 题单/练习册/复习册；家长/学生端收到并完成巩固练习，形成学习闭环并为商业化奠定基础。

### Story 3.1 全班共性易错题单 PDF 生成

As a 教师,  
I want 一键生成全班共性易错题单 PDF,  
so that 我能用于讲评与统一训练。

Acceptance Criteria

1: 支持按时间范围选择数据并生成题单 PDF。  
2: 题单按错误率排序，包含题目、解析/讲评区、页码与生成时间信息。  
3: PDF 生成过程可查看状态，生成完成后可下载。  

### Story 3.2 学生个人练习册/复习册 PDF 生成

As a 教师,  
I want 为学生生成个人练习册或期末复习册 PDF,  
so that 我能给家长/学生提供个性化复习资料。

Acceptance Criteria

1: 支持选择学生与时间范围生成个人 PDF。  
2: 支持按知识点去重聚合，至少提供“订正区/再练区”的版式元素，并支持选择生成模板（至少提供 1 个默认模板，生成记录需保存模板标识）。  
3: PDF 生成完成后可下载，并可生成分享入口用于家长端访问。  

### Story 3.3 同考点巩固题推荐与练习任务生成

As a 教师,  
I want 基于错题生成同考点巩固练习任务,  
so that 学生能及时完成举一反三巩固。

Acceptance Criteria

1: 对选定错题，系统返回同考点巩固题列表，并支持教师确认后生成练习任务。  
2: 每道巩固题包含题目内容与解析要点（来自题库）。  
3: 练习任务可指定学生/班级，并生成小程序端可领取入口。  

### Story 3.4 学生端练习领取、作答与提交

As a 学生,  
I want 在小程序领取练习并完成作答提交,  
so that 我能巩固薄弱点并记录学习过程。

Acceptance Criteria

1: 学生端可看到待完成练习任务列表与截止时间（如有）。  
2: 支持在小程序完成作答并提交，提交后显示完成状态与正确率反馈。  
3: 教师端可查看任务完成情况（领取/完成/正确率）。  

### Story 3.5 家长端结果查看与资料下载

As a 家长,  
I want 查看作业结果并下载孩子的复习资料,  
so that 我能监督与支持孩子完成复习。

Acceptance Criteria

1: 家长端可查看作业结果摘要与错题列表入口。  
2: 家长端可访问并下载个人练习册/复习册 PDF。  
3: 访问链接具备基本的权限控制，不能被未授权用户查看他人资料。  

## 14. 里程碑（两个月节奏）

- 第 1–2 周：Epic 1 完成（账号、建班导入、二维码生成下载），完成试点班级二维码发放。
- 第 3–5 周：Epic 2 完成（连拍、归档、异常处理、批改确认、错题沉淀、基础看板），跑通教师高频闭环并开始数据沉淀。
- 第 6–8 周：Epic 3 完成（PDF 生成与家长端触达、练习任务闭环），完成试点验证与性能稳定性打磨，准备小范围上线。

## 15. Next Steps

### 15.1 UX Expert Prompt

请基于本 PRD，为“教师端连拍采集 → 批改确认 → 班级看板/学生档案 → 资料（PDF）生成”的主流程设计信息架构与关键页面交互，输出低保真原型结构与关键状态（上传中、失败重试、异常待处理、生成中等）。

### 15.2 Architect Prompt

请基于本 PRD 与技术约束（`uniapp + nextjs + fastapi`），设计系统架构与核心数据模型：作业批次、作业图片、归档结果、批改记录、错题、知识点标签、题库检索、后台任务队列与对象存储；明确关键接口与异步任务链路，并给出可在 2 个月交付的实施拆分建议。
